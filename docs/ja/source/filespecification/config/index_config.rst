.. highlight:: none

.. _Ch:Config:

環境設定ファイル
--------------------------------

このファイルでは、TOML形式でH-waveに関する環境を設定します。
本ファイルは以下の3つのセクションから構成されます。

1. ``mode`` セクション: 計算モードに関する設定を指定するセクション。

2. ``log`` セクション: 標準出力に関する設定を指定するセクション。

3. ``file`` セクション: 入出力ファイルのパスなどを設定するセクションで、 ``input`` , ``output`` のサブセクションで構成される。

以下、ファイル例を記載します。

::

    [mode]
    mode = "UHF"
    flag_fock = "True"
    [mode.param]
    T = 0.1
    2Sz = 0
    [log]
    print_level = 1
    print_step = 20
    [file]
    [file.input]
    path_to_input = ""
    namelist = "namelist.def"
    [file.output]
    path_to_output = "output"
    energy = "energy.dat"
    eigen = "eigen.dat"
    green = "green.dat"

ファイル形式
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TOML形式


パラメータ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

``mode`` セクション
================================

- ``mode``

  **形式 :** string型

  **説明 :** 計算モードを指定します。``UHF`` (実空間版) または ``UHFk`` (波数空間版)。

- ``flag_fock``

  **形式 :** string型 (デフォルトは ``True`` )

  **説明 :** ``True`` の場合にはFock項を考慮し、 ``False`` の場合にはHartree項のみ取り扱います。


``mode.param`` セクション
================================

``mode.param`` セクションでは計算用のパラメータを指定します。
実空間UHFでは、ModPara ファイルで指定した内容を上書きします。

- ``T``

  **形式 :** float型 (デフォルトは0)

  **説明 :** 温度を指定します。

- ``2Sz``

  **形式 :** float型 (デフォルトはNone)

  **説明 :**
  スピンのz成分 ``Sz`` を固定したい場合に使用します。スピン空間をupとdownに分けた上で計算を実施します。
  固定したい ``Sz`` の2倍の値を指定し、何も指定しない場合 ( ``None`` )には、スピン空間を分けずに計算を実施します。
  ``Sz`` が保存しないような場合(スピン軌道相互作用がある場合など)には指定しないようにしてください。
  (*UHFkでは未対応*)

- ``Nsite``

  **形式 :** int型

  **説明 :** サイトの数を指定します。

- ``Ncond``

  **形式 :** int型

  **説明 :** 伝導電子の数を指定します。


- ``IterationMax``

  **形式 :** int型

  **説明 :** イタレーション回数の上限を指定します。


- ``EPS``

  **形式 :** int型

  **説明 :** 収束条件を指定します。一つ前のステップのグリーン関数との差のノルムが :math:`10^{\rm -EPS}` 以下になった場合に収束したと判定します。


- ``Mix``

  **形式 :** float型

  **説明 :** Green関数の更新時に、古い値と新しく得られた値を混ぜる(simple-mixing)割合 :math:`\alpha` を指定します。
  0以上から1以下の実数で指定してください。1にすると古い値は使われません。
  simple-mixingについては :ref:`アルゴリズムの章 <algorithm_sec>` をご覧ください。


- ``RndSeed``

  **形式 :** int型

  **説明 :** 乱数のシード(種)を指定します。


- ``EpsSlater``

  **形式 :** int型

  **説明 :**


- ``CDataFileHead``

  **形式 :** string型 (デフォルトは ``zvo``)

  **説明 :** データファイル名のプレフィックスを指定します。


- ``CParaFileHead``

  **形式 :** string型 (デフォルトは ``zqp``)

  **説明 :** パラメータファイル名のプレフィックスを指定します。


- ``ene_cutoff``

  **形式 :** float型

  **説明 :** Fermi分布関数を計算する際に overflow を避けるためのカットオフを指定します。


- ``CellShape``

  **形式 :** int array型

  **説明 :** box の形状 Nx, Ny, Nz を指定します。 (UHFkのみ)

``log`` セクション
================================

- ``print_level``

  **形式 :** int型 (デフォルトは1)

  **説明 :** 標準出力のレベルを指定します。1にすると詳細な情報が出力されます。

- ``print_step``

  **形式 :** int型 (デフォルトは1)

  **説明 :** イタレーション中に計算ログを標準出力に書き出す間隔を指定します。

``file`` セクション
================================

``input`` と ``output`` のサブセクションを持ちます。
前者は入力ファイルに関する情報(格納場所など)、後者は出力ファイルに関する情報(格納場所など)について指定します。
以下、順に説明します。

``file.input`` セクション
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- ``path_to_input``

  **形式 :** str型 (デフォルトは "")

  **説明 :** 入力ファイルの格納されているディレクトリを指定します。

- ``namelist``

  **形式 :** str型 (デフォルトは "namelist")

  **説明 :** 入力ファイルリストファイルの名前を指定します。(UHFのみ)

- ``initial``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 初期状態の一体グリーン関数データを格納したファイルの名前を指定します(UHFkのみ)。
  ファイルは NumPy binary 形式で、``file.output`` の ``green`` の出力に対応します。

``file.input.interaction`` セクション
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

波数空間版UHFで、幾何情報や相互作用のタイプと定義ファイルとの対応付けを行います。

- ``path_to_input``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 入力ファイルを格納するディレクトリを指定します。``file.input`` セクションの ``path_to_input`` とは独立に指定できます。

- ``Geometry``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 幾何情報のファイル名を指定します。

- ``Transfer``, ``Coulomb``, ``Hund``, ``Ising``, ``Exchange``, ``PairLift``, ``PairHop``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 各相互作用の係数ファイル名を指定します。


``file.output`` セクション
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- ``path_to_output``

  **形式 :** str型 (デフォルトは "output")

  **説明 :** 出力ファイルを格納するディレクトリを指定します。

- ``energy``

  **形式 :** str型 (デフォルトなし)

  **説明 :** エネルギーを出力するファイル名を指定します。このキーワードがない場合には情報は出力されません。

- ``eigen``

  **形式 :** str型 (デフォルトなし)

  **説明 :** ハミルトニアンの固有値を出力するファイル名を指定します。このキーワードがない場合には情報は出力されません。

- ``green``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 一体グリーン関数の出力ファイル名を指定します。このキーワードがない場合には情報は出力されません。

- ``initial``

  **形式 :** str型 (デフォルトなし)

  **説明 :** 初期状態読み込み用の一体グリーン関数の出力ファイル名を指定します。このキーワードがない場合には情報は出力されません。
  (UHFのみ)
